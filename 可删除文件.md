# 可删除文件清单

> 生成时间: 2025-08-11  
> 第一优先级文件已删除，节省空间: ~2.15GB  
> 以下是剩余的可删除文件

## 📊 删除统计
- **删除前大小**: 2.6GB
- **删除后大小**: 451MB
- **已节省空间**: 2.15GB

---

## 🟡 第二优先级 - 建议删除 (~70MB)

### 1. 重复的Lambda ZIP包 (63MB)
```bash
# 文件名                        大小      说明
zilliz-rag-ingest.zip          21MB     # 与lambda_packages重复，已有构建流程
zilliz-rag-query.zip           21MB     # 与lambda_packages重复，已有构建流程
zilliz-rag-query-new.zip       21MB     # 旧版本，不再需要
```

**删除命令**:
```bash
rm -f zilliz-rag-*.zip
```

### 2. 测试和临时文件 (~20KB)
```bash
# 文件名                        大小      说明
test_dynamic_config.html       17KB     # 测试用HTML文件
payload.txt                    57B      # 测试负载文件
test-payload.txt              53B      # 测试负载文件
response.json                 2.9KB    # 测试响应文件
env-vars.json                 377B     # 环境变量测试文件
lambda-trust-policy.json      194B     # Lambda信任策略（可能已过时）
```

**删除命令**:
```bash
rm -f test_dynamic_config.html
rm -f payload.txt test-payload.txt
rm -f response.json
rm -f env-vars.json
rm -f lambda-trust-policy.json
```

### 3. Lambda函数中的辅助文件 (~50KB)
> ⚠️ 请先确认这些文件确实未被使用

```bash
# 文件名                                大小      说明
lambda_functions/jsonpatch.py         29KB     # JSON补丁库（可能未使用）
lambda_functions/jsonpointer.py       10KB     # JSON指针库（可能未使用）
lambda_functions/mypy_extensions.py   7.6KB    # MyPy类型检查扩展
lambda_functions/numpy_stub.py        514B     # NumPy存根文件
lambda_functions/pandas_stub.py       1.5KB    # Pandas存根文件
```

**删除命令** (请先确认):
```bash
# 先检查是否被引用
grep -r "jsonpatch\|jsonpointer\|mypy_extensions" lambda_functions/*.py

# 如果确认未使用，执行删除
rm -f lambda_functions/jsonpatch.py
rm -f lambda_functions/jsonpointer.py
rm -f lambda_functions/mypy_extensions.py
rm -f lambda_functions/numpy_stub.py
rm -f lambda_functions/pandas_stub.py
```

---

## 🟢 第三优先级 - 可选删除 (~20KB)

### 4. Infrastructure测试和输出文件
```bash
# 文件名                                大小      说明
infrastructure/test_makefile_env.sh   674B     # Makefile环境测试脚本
infrastructure/test_import.py         450B     # 导入测试脚本
infrastructure/web-outputs.json       306B     # Web栈输出（可能过时）
infrastructure/cdk-outputs.json       237B     # CDK输出（可能过时）
infrastructure/outputs.json           237B     # 通用输出（可能过时）
infrastructure/ragapi-outputs.json    842B     # API输出（可能过时）
infrastructure/response.json          3.6KB    # 响应测试文件
```

**删除命令** (可选):
```bash
rm -f infrastructure/test_*.sh
rm -f infrastructure/test_*.py
rm -f infrastructure/*-outputs.json
rm -f infrastructure/outputs.json
rm -f infrastructure/response.json
```

### 5. 可能的旧版本文件
```bash
# 文件名                                大小      说明
infrastructure/app_fixed.py           1.8KB    # 修复版本（可能已合并）
infrastructure/app_v2.py              3.3KB    # V2版本（可能已合并）
infrastructure/deploy_web_only.py     1.1KB    # 单独部署脚本（可能过时）
```

**删除命令** (需要确认):
```bash
# 先确认当前使用的是 app.py
cat infrastructure/app.py | head -5

# 如果确认不需要旧版本
rm -f infrastructure/app_fixed.py
rm -f infrastructure/app_v2.py
rm -f infrastructure/deploy_web_only.py
```

---

## 🔧 批量清理脚本

### 安全清理（推荐）
```bash
#!/bin/bash
# cleanup_remaining.sh

echo "🧹 清理剩余的可删除文件..."

# 第二优先级 - ZIP文件
echo "删除重复的ZIP文件..."
rm -f zilliz-rag-*.zip

# 第二优先级 - 测试文件
echo "删除测试和临时文件..."
rm -f test_dynamic_config.html
rm -f payload.txt test-payload.txt
rm -f response.json
rm -f env-vars.json
rm -f lambda-trust-policy.json

echo "✅ 安全清理完成！"
```

### 完整清理（需谨慎）
```bash
#!/bin/bash
# cleanup_all_remaining.sh

echo "⚠️ 警告：这将删除所有剩余的可删除文件"
read -p "确定要继续吗？(y/n) " -n 1 -r
echo
if [[ ! $REPLY =~ ^[Yy]$ ]]
then
    exit 1
fi

# 执行所有清理
bash cleanup_remaining.sh

# Lambda辅助文件（请先确认）
echo "删除Lambda辅助文件..."
rm -f lambda_functions/jsonpatch.py
rm -f lambda_functions/jsonpointer.py
rm -f lambda_functions/mypy_extensions.py
rm -f lambda_functions/*_stub.py

# Infrastructure测试文件
echo "删除Infrastructure测试文件..."
rm -f infrastructure/test_*
rm -f infrastructure/*-outputs.json
rm -f infrastructure/outputs.json
rm -f infrastructure/response.json
rm -f infrastructure/app_*.py
rm -f infrastructure/deploy_web_only.py

echo "✅ 完整清理完成！"
```

---

## 📝 清理后维护建议

1. **更新.gitignore**
   ```bash
   # 添加到.gitignore
   *.zip
   test_*.html
   *-outputs.json
   payload*.txt
   response.json
   ```

2. **创建Makefile清理目标**
   ```makefile
   clean-temp:
       rm -f *.zip test_*.html payload*.txt response.json
       rm -f infrastructure/*-outputs.json
   ```

3. **定期清理计划**
   - 每次部署后运行 `make clean-temp`
   - 每周检查并清理过时文件
   - 保持项目整洁，避免积累垃圾文件

---

## ⚠️ 注意事项

1. **删除前请确认**：某些文件可能仍在使用中
2. **备份重要数据**：删除前确保Git已提交
3. **测试功能**：删除后测试系统功能是否正常
4. **保留必要文件**：requirements.txt等配置文件不要删除

---

> 总计可再节省空间: ~70MB  
> 建议先执行第二优先级的清理，第三优先级根据需要选择性清理